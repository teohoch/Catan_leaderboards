
<table class="display table table-condensed table-responsive">
  <thead>
  <tr>
    <th><h3>Datos del Torneo</h3></th>
  </tr>

  </thead>
  <tbody>
  <% @tournament.presentable_attributes.each do |attribute_name| %>
      <tr>
        <td> <%= Tournament.human_attribute_name(attribute_name) %> </td>
        <td> <%= @tournament.send(attribute_name) %> </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if @tournament.raw_status != 0 %>
    <% if @tournament.mode == 0 %>
        <h3>Partidas del Torneo</h3>
        <% @tournament.rounds.times do |round| %>
            <h4>Ronda <%= round+1 %></h4>
            <div class="row">
              <% @tournament.matches.round(round+1).each_with_index do |match, index| %>
                  <div class="col-md-4">
                    <table class="display table table-condensed table-responsive">
                      <caption>
                        <%= link_to [Match.model_name.human, index+1, '-', match.status].join(' '), match %>
                      </caption>
                      <thead>
                      <tr>
                        <th><%= UserMatch.human_attribute_name(:user) %></th>
                        <% if match[:validated] %>
                            <th><%= UserMatch.human_attribute_name(:vp) %></th>
                            <th><%= UserMatch.human_attribute_name(:victory_position) %></th>
                        <% end %>
                      </tr>
                      </thead>
                      <tbody>
                      <% match.user_matches.each do |player| %>
                          <tr>
                            <td><%= player.user[:name] %></td>
                            <% if match[:validated] %>
                                <td><%= player[:vp] %></td>
                                <td><%= player[:victory_position] %></td>
                            <% end %>
                          </tr>
                      <% end %>
                      </tbody>
                    </table>
                  </div>
              <% end %>
            </div>
        <% end %>
    <% end %>
<% end %>

<div class="row">
  <% if can? :update, @tournament.raw_model %>
      <div class="col-md-1">
        <%= link_to (t 'edit'), edit_tournament_path(@tournament.raw_model), class: 'btn btn-info' %>
      </div>
  <% end %>
  <% if can? :start, @tournament.raw_model %>
      <div class="col-md-1">
        <%= simple_form_for @tournament.raw_model, :url => start_tournament_path(@tournament.raw_model), :method => :post do |f| %>
            <%= f.button :submit_tag, (t 'start'), :class => 'btn btn-info' %>
        <% end %>
      </div>
  <% end %>

  <%= @tournament.inscription_button(current_user) %>


  <div class="col-md-1">
    <%= link_to (t 'back'), tournaments_path, class: 'btn btn-danger' %>
  </div>


</div>
